<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:behaviors="clr-namespace:MirroRehab.Behaviors"
             xmlns:controls ="clr-namespace:MirroRehab.Controls"
             x:Class="MirroRehab.Controls.CalibrationOverlay">
    <Frame x:Name="Root"
          BackgroundColor="#80000000"
          IsVisible="{Binding IsCalibrating}"
          InputTransparent="False"    
         
          Padding="16"
          Margin="0"
          ZIndex="9999">
        <Frame HasShadow="True"
               CornerRadius="16"
               Padding="16"
               BackgroundColor="{AppThemeBinding Light={StaticResource BackgroundLight}, Dark={StaticResource BackgroundDark}}"
               HorizontalOptions="Center"
               VerticalOptions="Center"
               >
            <ScrollView>
                <VerticalStackLayout Spacing="16">

                    <Label Text="Калибровка пальцев"
                           FontSize="20"
                           FontAttributes="Bold"
                           HorizontalOptions="Center"/>

                    <!-- сетка 5 строк (пальцы) x 5 колонок (лейбл + 2 слайдера с их значениями) -->
                    <Grid ColumnDefinitions="140,*,50,*,50"
                          RowDefinitions="Auto,Auto,Auto,Auto,Auto"
                          ColumnSpacing="12" RowSpacing="10">


                        <Label Grid.Row="0" Grid.Column="1" Text="Сжатие"  VerticalOptions="Center" HorizontalOptions="Center"/>
                        <Label Grid.Row="0" Grid.Column="3" Text="Разжатие"  VerticalOptions="Center" HorizontalOptions="Center"/>

                        
                        
                        <!-- Указательный палец -->
                        <Label Grid.Row="1" Grid.Column="0" Text="Указательный"  VerticalOptions="End"/>
                        <controls:PrettySlider Grid.Row="1"  Grid.Column="1" VerticalOptions="Start"
                                               Minimum="0" Maximum="180"
                                               Step="5"
                                               ShowTicks="True" TickEvery="10"
                                               Value="{Binding IndexFlex, Mode=TwoWay}" />

                        <!-- Средний палец -->
                        <Label Grid.Row="2" Grid.Column="0" Text="Средний"  VerticalOptions="End"/>
                        <controls:PrettySlider Grid.Row="2"  Grid.Column="1" VerticalOptions="Start"
                           Minimum="0" Maximum="180"
                             Step="5"
                           ShowTicks="True" TickEvery="10"
                           Value="{Binding indexFlex, Mode=TwoWay}" />

                        <!-- Безымянный палец -->
                        <Label Grid.Row="3" Grid.Column="0" Text="Безымянный"  VerticalOptions="End"/>
                        <controls:PrettySlider Grid.Row="3"  Grid.Column="1" VerticalOptions="Start"
                                               Minimum="0" Maximum="180"
                                                 Step="5"
                                               ShowTicks="True" TickEvery="10"
                                               Value="{Binding indexFlex, Mode=TwoWay}" />


                        <!-- Мизинец палец -->
                        <Label Grid.Row="4" Grid.Column="0" Text="Мизинец"  VerticalOptions="End"/>
                        <controls:PrettySlider Grid.Row="4"  Grid.Column="1" VerticalOptions="Start"
                                                Minimum="0" Maximum="180"
                                                 Step="5"
                                                ShowTicks="True" TickEvery="10"
                                                Value="{Binding indexFlex, Mode=TwoWay}" />


                    </Grid>

                    <Grid ColumnDefinitions="*,*"
                          ColumnSpacing="12"
                          Margin="0,8,0,0">
                        <Button Grid.Column="0" Text="Отмена"
                                Command="{Binding CancelCalibrationCommand}" />
                        <Button Grid.Column="1" Text="Сохранить"
                                BackgroundColor="{DynamicResource Accent}"
                                Command="{Binding SaveCalibrationCommand}" />
                    </Grid>

                </VerticalStackLayout>
            </ScrollView>
        </Frame>
    </Frame>
</ContentView>
